<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>å¼ æœ¬æ™ºå’Œæ¯”èµ›è®°å½•æ±‡æ€»</title>
    <style>
        @media (max-width: 1200px) {
  /* ä¸­ç­‰å±å¹•é€‚é… */
  .sidebar {
    width: 280px;
    margin: 0 10px;
  }

  .header {
    left: 300px; /* å¯¼èˆªæ å˜çª„åçš„è°ƒæ•´ */
  }

  .content-area {
    left: 300px;
  }
}

@media (max-width: 992px) {
  /* å¹³æ¿é€‚é… */
  .sidebar {
    position: relative;
    width: 100%;
    height: auto;
    margin: 10px;
    top: auto;
    bottom: auto;
  }

  .header {
    position: relative;
    left: 0;
    right: 0;
    top: 0;
    margin: 10px;
    height: auto;
    padding: 15px 0;
  }

  .content-area {
    position: relative;
    left: 0;
    right: 0;
    top: 0;
    margin: 10px;
  }

  .search-container {
    width: 90%;
    flex-direction: column;
  }

  .search-filter,
  .search-input,
  .search-btn {
    width: 100% !important;
    border-radius: 25px !important;
    margin-left: 0 !important;
  }

  .search-filter {
    border-right: 2px solid #5F9EA0 !important;
  }
}

@media (max-width: 768px) {
  /* æ‰‹æœºç«¯é€‚é… */
  .header .title {
    font-size: 24px;
    margin-bottom: 10px;
  }

  .banner span {
    font-size: 16px;
    margin-left: 10px;
  }

  .nav-buttons {
    right: 10px;
    gap: 8px;
  }

  .nav-button {
    width: 25px;
    height: 25px;
    font-size: 14px;
  }

  .menu-item {
    margin: 5px !important;
    padding: 10px !important;
  }

  /* æ¯”èµ›å¡ç‰‡é€‚é… */
  .match-card {
    width: 100% !important;
    margin: 10px 0 !important;
  }

  .match-details {
    grid-template-columns: 1fr;
  }

  /* éšè—éå¿…è¦å…ƒç´  */
  .pingpong-icon {
    display: none;
  }

  /* ç§»åŠ¨ç«¯å¯¼èˆªèœå• */
  .sidebar {
    position: fixed;
    top: -100%;
    left: 0;
    width: 100%;
    height: auto;
    z-index: 1000;
    transition: top 0.3s;
    border-radius: 0 0 15px 15px;
  }

  .menu-toggle {
    display: block !important;
    position: fixed;
    top: 10px;
    left: 10px;
    z-index: 1001;
    background: #5F9EA0;
    color: white;
    padding: 8px 12px;
    border-radius: 5px;
    cursor: pointer;
  }

  .sidebar.active {
    top: 0;
  }
}
        .header {
            position: fixed;
            left: 380px;    /* å¯¼èˆªæ 320 + å·¦å³è¾¹è·20x2 + é—´éš”20 */
            right: 20px;    /* è·ç¦»å³ä¾§20px */
            top: 20px;      /* ä¸å¯¼èˆªæ é¡¶éƒ¨å¯¹é½ */
            height: 200px;
            background: #e0ffff; /* åŒå¯¼èˆªæ åº•è‰² */
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            font-weight: bold;
            /*color: #333;*/
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); /* æ·»åŠ æŸ”å’Œé˜´å½± */
            flex-direction: column;
        }

        .title {
            margin: 0;
            font-size: 32px;
            color: #2F4F4F;
            margin-bottom: 15px;
        }

        /* æœç´¢æ¡†å®¹å™¨ */
        .search-container {
            width: 60%;
            max-width: 600px;
            display: flex;
            gap: 10px;
            align-items: stretch;
        }

        /* æœç´¢è¾“å…¥æ¡† */
        .search-input {
            flex: 1;
            height: 40px;
            border: 2px solid #5F9EA0;
            border-top-right-radius: 25px;
            border-bottom-right-radius: 25px;
            padding: 0 20px;
            font-size: 16px;
            transition: all 0.3s;
            margin-left: -10px;
            color: #2F4F4F;
        }

        .search-filter{
            width: 100px;
            height: 44px;
            border: 2px solid #5F9EA0;
            border-right: 0px;
            border-top-left-radius: 25px;
            border-bottom-left-radius: 25px;
            padding: 0;
            font-size: 16px;
            text-align: center;
            color: #2F4F4F;

        }

        .search-input:focus {
            outline: none;
            box-shadow: 0 0 8px rgba(95,158,160,0.3);
        }

        /* æœç´¢æŒ‰é’® */
        .search-btn {
            width: 100px;
            border: none;
            border-radius: 25px;
            background: #5F9EA0;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .search-btn:hover {
            background: #4D7E80;
            transform: translateY(-1px);
        }

        .pingpong-icon {
            font-size: 30px ;
            text-align: center;
            transform: scaleX(-1);
            background-size: contain;

        }

        .content-area {
            position: fixed;
            left: 380px;    /* ä¸headeråŒå®½ */
            right: 20px;
            top: 240px;     /* headeré«˜åº¦200 + é¡¶éƒ¨20 + é—´éš”20 */
            bottom: 20px;   /* ä¸sidebaråº•éƒ¨å¯¹é½ */
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.15);
            padding: 20px;
            box-sizing: border-box;
            overflow: auto; /* å…è®¸å†…å®¹æ»šåŠ¨ */
            z-index: 0;     /* ç¡®ä¿åœ¨å¯¼èˆªæ ä¸‹æ–¹ */

        }

        .banner{
            height: 40px;
            flex: 1;
            margin: 5px;
            background: #e0ffff;
            border-radius: 10px;
            box-shadow: 0 0 8px rgba(95,158,160,0.3);
            flex-direction: column;
            justify-content: center;
            display: flex;
            position: relative; /* æ–°å¢ */
            padding-right: 100px; /* ä¸ºå›¾æ ‡ç•™å‡ºç©ºé—´ */
        }

        .banner span {
            color: #2F4F4F;
            font-size: 18px;
            margin-left: 20px;
        }

        .content {
            height: calc(100% - 70px); /* æ–°å¢ */
            margin: 20px 0;           /* æ–°å¢ */
            /*margin-top: 30px;*/
            background: #e0ffff;
            border-radius: 10px;
            box-shadow: 0 0 8px rgba(95,158,160,0.3);
            margin-left : 50px;
            margin-right: 50px;
            flex: 1;             /* æ–°å¢ */
            box-sizing: border-box;  /* æ–°å¢ */
            display: flex;
            align-items: center;
            flex-direction: column;
            color: #2F4F4F;
            position: relative;
            overflow: auto;
        }

        .content p {
            margin-top: 5px;
        }

        /* æ–°å¢å¯¼èˆªæŒ‰é’®å®¹å™¨æ ·å¼ */
        .nav-buttons {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 12px;
        }

        /* å¯¼èˆªæŒ‰é’®é€šç”¨æ ·å¼ */
        .nav-button {
            width: 30px;
            height: 30px;
            border-radius: 30%;
            background: #5F9EA0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow:
                0 3px 6px rgba(0,0,0,0.16),
                inset 0 -2px 0 rgba(0,0,0,0.1);
            color: white;
            font-size: 16px;
            font-weight: bold;
            border: none;
        }

        /* æ‚¬åœæ•ˆæœ */
        .nav-button:hover {
            background: #4D7E80;
            transform: translateY(-1px);
            box-shadow:
                0 5px 10px rgba(0,0,0,0.2),
                inset 0 -2px 0 rgba(0,0,0,0.15);
        }

        /* ç‚¹å‡»æ•ˆæœ */
        .nav-button:active {
            transform: translateY(1px);
            box-shadow:
                0 2px 4px rgba(0,0,0,0.1),
                inset 0 2px 0 rgba(255,255,255,0.1);
        }

        /* ç•™è¨€æ¿å®¹å™¨æ ·å¼ */
        .message-board {
            margin: 20px 0;
            padding: 20px;
            background: linear-gradient(145deg, #c8ffff, #a0e0e0);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(95,158,160,0.2);
            width: 80%;

        }

        /* è¾“å…¥æ¡†æ ·å¼ */
        #messageInput {
            width: 95%;
            padding: 12px;
            border: 2px solid #5F9EA0;
            border-radius: 8px;
            margin-bottom: 10px;
            font-family: 'Noto Sans SC';
            resize: vertical;
            transition: all 0.3s;
            /*align-items: center;*/
        }

        #messageInput:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(95,158,160,0.3);
        }

        /* æäº¤æŒ‰é’®æ ·å¼ */
        #submitBtn {
            background: #5F9EA0;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            float: right;
        }

        #submitBtn:hover {
            background: #4D7E80;
            transform: translateY(-2px);
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }

        /* ç•™è¨€æ ·å¼ */
        .message-bubble {
            position: absolute;
            padding: 10px 15px;
            background: white;
            border-radius: 15px;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.5s ease;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-5px) rotate(2deg); }
        }

        .message-bubble:hover {
            transform: scale(1.05) rotate(-2deg);
            z-index: 1;
            box-shadow: 3px 3px 15px rgba(0,0,0,0.2);
        }

        /* å¯¼èˆªæ å®¹å™¨ */
        .sidebar {
            position: fixed;
            left: 0;
            top: 20px;       /* é¡¶éƒ¨ç•™ç™½ */
            bottom: 20px;    /* åº•éƒ¨ç•™ç™½ */
            width: 320px;
            background: #e0ffff;
            border-radius: 15px;  /* åœ†è§’åŠå¾„ */
            margin: 0 20px;  /* å·¦å³ç•™ç™½ */
            padding: 15px;   /* å†…è¾¹è· */
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            gap: 20px;       /* å­å…ƒç´ é—´è· */
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* é€šç”¨å†…å®¹åŒºå—æ ·å¼ */
        .menu-item {
            background: rgba(255, 255, 255, 0.5);  /* åŠé€æ˜ç™½è‰² */
            border-radius: 10px;  /* ç¨å°çš„åœ†è§’ */
            padding: 15px;       /* å†…è¾¹è· */
            flex: 1;             /* è‡ªåŠ¨å¡«å……å‰©ä½™ç©ºé—´ */
            min-height: 100px;   /* æœ€å°é«˜åº¦ */
            
            /* å®‰å…¨é—´è· */
            margin: 10px;
            box-sizing: border-box;
            
            /* å¼¹æ€§å¸ƒå±€ç”¨äºå†…éƒ¨å†…å®¹ */
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        /* ä¸Šéƒ¨åŒºå— */
        .top-item {
            margin-top: 0;  /* é¡¶éƒ¨å–æ¶ˆå¤–è¾¹è· */
        }

        /* ä¸‹éƒ¨åŒºå— */
        .bottom-item {
            margin-bottom: 0;  /* åº•éƒ¨å–æ¶ˆå¤–è¾¹è· */
        }

        .top-item div {
            color: #2F4F4F;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            font-size: 18px;
            font-weight: 500;
            letter-spacing: 2px;
            padding: 12px 20px;
            margin: 8px 0;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            padding-left: 40px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 5px;
        }




        /* ä¿®æ”¹åŸå¯¼èˆªæ æ ·å¼ */
        .sidebar {
            position: fixed;
            left: 20px;     /* å¢åŠ å·¦ä¾§å®šä½ */
            top: 20px;
            bottom: 20px;
            width: 320px;
            /* å…¶ä»–åŸæœ‰æ ·å¼ä¿æŒä¸å˜... */
            z-index: 1;    /* ç¡®ä¿å¯¼èˆªæ åœ¨æ ‡é¢˜æ ä¸Šæ–¹ */
        }



        /* å›¾æ ‡ç‰¹æ•ˆ */
        .menu-item div::before {
        
            font-size: 20px;
            transition: transform 0.3s;
        }

        .menu-item {
            overflow: auto;
        }

        .top-item div:nth-child(1)::before { content: "ğŸ†"; } /* ç”Ÿæ¶¯æˆå°± */
        .top-item div:nth-child(2)::before { content: "ğŸ“ˆ"; } /* æŠ€æœ¯åˆ†æ */
        .top-item div:nth-child(3)::before { content: "ğŸ‘¤"; } /* å…³äºé€‰æ‰‹ */
        .top-item div:nth-child(4)::before { content: "ğŸŒ"; } /* è¯­è¨€è®¾ç½® */

        /* æ‚¬åœæ•ˆæœ */
        .top-item div:hover {
            color: #5F9EA0; /* ä¸»é¢˜è‰² */
            transform: translateX(5px);
            background: rgba(255, 255, 255, 0.7) !important;
            box-shadow: 3px 3px 12px rgba(95, 158, 160, 0.2);
        }

        .menu-item div:hover::before {
            transform: scale(1.2) rotate(-15deg); /* å›¾æ ‡åŠ¨ç”» */
        }

        /* ç‚¹å‡»æ•ˆæœ */
        .menu-item div:active {
            /*transform: translateX(10px) scale(0.96);*/
        }

        /* å¤šçº§èœå•æ ·å¼ */
            .nav-item {
            background: rgba(255,255,255,0.3);
            border-radius: 6px;
            margin: 5px 0;
            padding: 10px 15px !important; /* å¼ºåˆ¶ç»Ÿä¸€å†…è¾¹è· */
            cursor: pointer;
            transition: all 0.3s ease;
            display: block; /* æ”¹ä¸ºå—çº§å…ƒç´  */
            text-align: left; /* å¼ºåˆ¶å·¦å¯¹é½ */
            white-space: normal; /* å…è®¸æ¢è¡Œ */
            word-wrap: break-word; /* é•¿å•è¯æ¢è¡Œ */
        }


        /* ç®­å¤´ä½ç½®ä¿®æ­£ */
        .nav-arrow {
            left: 20px;
            display: inline-block;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); /* æ›´å¹³æ»‘çš„ç¼“åŠ¨æ›²çº¿ */
            transform-origin: center; /* ç¡®ä¿æ—‹è½¬ä¸­å¿ƒæ­£ç¡® */
        }

        /* ç¡®ä¿æ–‡å­—ä¸è¦†ç›–ç®­å¤´ */
        .nav-item > span:first-child {
            margin-right: 8px;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.7);
            transform: translateX(5px);
        }



        .nav-child {
            margin-left: 10px;
            display: none;
        }

        .nav-child.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; max-height: 0; }
            to { opacity: 1; max-height: 1000px; }
        }

        /* ä¸åŒå±‚çº§é¢œè‰² */
        .nav-item.level-0 { color: #2F4F4F; font-weight: 600; }
        .nav-item.level-1 { color: #4682B4; }
        .nav-item.level-2 { color: #5F9EA0; }
        .nav-item.level-3 { color: #6CA6CD; }



        .nav-item.level-3::before {
            content: "â€¢";  /* ä¿®æ”¹æœ€åå±‚çº§çš„æŒ‡ç¤ºç¬¦ */
            color: #5F9EA0;
            margin-right: 8px;
        }

        .match-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            width: 90%;
            max-width: 600px;
        }

        .match-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .match-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #5F9EA0;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }

        .match-round {
            color: #2F4F4F;
            font-size: 18px;
            font-weight: 600;
        }

        .match-result {
            background: #5F9EA0;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 14px;
        }

        .match-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .detail-label {
            color: #5F9EA0;
            font-weight: 500;
            min-width: 60px;
        }

        .detail-value {
            color: #2F4F4F;
            flex: 1;
        }

        .no-matches {
            color: #5F9EA0;
            font-size: 18px;
            text-align: center;
            padding: 30px;
        }

        .banner a {
            color: #2F4F4F !important;
            text-decoration: none !important;
            font-size: 18px;
            /*padding: 2px 5px;*/
            border-radius: 4px;
            /*transition: all 0.3s;*/
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
            padding: 2px 4px;
            border-radius: 4px;
        }

        .banner a:hover {
            background: rgba(95,158,160,0.1);
            color: #5F9EA0 !important;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(95,158,160,0.15)
        }

        .year-list .nav-item,
        .match-list .nav-item {
            transition: all 0.3s ease;
        }

        .year-list .nav-item:hover,
        .match-list .nav-item:hover {
            transform: translateX(5px);
            background: rgba(95,158,160,0.2) !important;
        }

        .match-list {
            max-width: 800px;
            margin: 0 auto;
        }

        .search-highlight {
            background-color: #ffeb3b;
            padding: 0 2px;
            border-radius: 3px;
        }

        .match-card {
            transition: all 0.3s;
            margin-bottom: 15px;
        }

        .match-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(95,158,160,0.2);
        }

        .player-highlight {
            background-color: #ffeb3b;
            font-weight: bold;
        }

        /* é¡¹ç›®å¡é€šç”¨æ ·å¼ */
        .content .nav-item.level-1,
        .content .nav-item.level-2,
        .content .nav-item.level-3 {
            width: 160px !important;
            height: 160px !important;
            border-radius: 20px !important;
            background: white !important;
            margin: 15px !important;
            padding: 20px !important;
            display: flex !important;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 12px rgba(95,158,160,0.15) !important;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
            border: 2px solid #5F9EA0;
        }

        /* æ–‡å­—æ ·å¼ */
        .content .nav-item.level-1 span,
        .content .nav-item.level-2 span,
        .content .nav-item.level-3 span {
            font-size: 16px;
            color: #2F4F4F !important;
            font-weight: normal !important;
            text-align: center;
            line-height: 1.4;
        }

        /* å‰¯æ ‡é¢˜æ ·å¼ */
        .content .nav-item.level-1 span:nth-child(2),
        .content .nav-item.level-2 span:nth-child(2) {
            font-size: 13px;
            color: #5F9EA0 !important;
            margin-top: 12px;
        }

        /* å¡ç‰‡å®¹å™¨æ’åˆ—æ–¹å¼ */
        .year-list,
        .match-list {
            display: flex !important;
            flex-wrap: wrap !important;
            gap: 20px !important;
            padding: 20px 0 !important;
            justify-content: flex-start !important;
        }

        /* æ‚¬åœæ•ˆæœ */
        .content .nav-item.level-1:hover,
        .content .nav-item.level-2:hover,
        .content .nav-item.level-3:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 20px rgba(95,158,160,0.25) !important;
        }

        .time {
            display: flex;
            gap:8px;
            margin-top: 10px;
            color: #5F9EA0;
            font-size: 14px;
            margin-right: 400px;
        }

        .search-container {
    position: relative; /* ä¸ºæç¤ºæ¡†å®šä½æä¾›åŸºå‡† */
}

.search-alert {
    position: absolute;
    bottom: -40px;
    left: 120px; /* å¯¹é½æœç´¢è¾“å…¥æ¡† */
    background: #fff;
    color: #CD5C5C;
    font-size: 14px;
    padding: 8px 15px;
    border-radius: 4px;
    box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    border: 1px solid #ffcccc;
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none; /* é˜²æ­¢å¹²æ‰°ç‚¹å‡»æ“ä½œ */
    z-index: 999;
}

.search-alert::before {
    content: '';
    position: absolute;
    top: -6px;
    left: 20px;
    width: 12px;
    height: 12px;
    background: #fff;
    border-left: 1px solid #ffcccc;
    border-top: 1px solid #ffcccc;
    transform: rotate(45deg);
}

.search-alert.show {
    opacity: 1;
    transform: translateY(0);
}


    </style>


    <script type="text/javascript">
        
        let data = null;
        let originalContent = null;
        let currentSearchKeyword = null;


        


        // let currentPath = ['å½“å‰é¡µ:é¦–é¡µ'];
        function createMenu(parentElement, data, level = 0) {
            Object.entries(data).forEach(([key, value]) => {
                const item = document.createElement('div');
                item.className = `nav-item level-${level}`;
                item.textContent = key;
                item.style.paddingLeft = `${30 + level * 20}px`;

                const arrow = document.createElement('span');
                arrow.className = 'nav-arrow';
                arrow.textContent = 'â–¶';
                item.prepend(arrow);

                const childContainer = document.createElement('div');
                childContainer.className = 'nav-child';

                parentElement.appendChild(item);
                parentElement.appendChild(childContainer);

                item.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const isActive = !childContainer.classList.contains('show');

                    if(level === 0) { // åªå¤„ç†ä¸€çº§èœå•
                        const contentDiv = document.querySelector('.content');
                        if(!originalContent) { // é¦–æ¬¡ä¿å­˜åŸå§‹å†…å®¹
                            originalContent = contentDiv.innerHTML; 
                        }
                        
                        if(isActive) { // å±•å¼€æ—¶æ¸…ç©ºå†…å®¹
                            contentDiv.innerHTML = '';
                        } else { // æ”¶å›æ—¶æ¢å¤å†…å®¹
                            contentDiv.innerHTML = originalContent;
                            // é‡æ–°ç»‘å®šç•™è¨€æ¿äº‹ä»¶
                            loadHomeContent();
                            // document.getElementById('submitBtn').onclick = submitMessage;
                            // document.getElementById('messageInput').onkeydown = function(e) {
                            //     if (e.key === 'Enter' && !e.shiftKey) {
                            //         e.preventDefault();
                            //         submitMessage();
                            //     }
                            // };
                        }
                    }
                    
                    // æ›´æ–°è·¯å¾„é€»è¾‘
                    if (isActive) {
                        currentPath = currentPath.slice(0, level + 1); // +1ä¿ç•™"å½“å‰é¡µ:é¦–é¡µ"
                        currentPath[level + 1] = key;
                    } else {
                        // æ”¶å›æ—¶ç§»é™¤å½“å‰å±‚çº§
                        if (level === 2) { // æ¯”èµ›åç§°æ˜¯ç¬¬ä¸‰çº§
                            setTimeout(() => loadContentByPath(), 0);
                        }
                        currentPath = currentPath.slice(0, level + 1);
                    }
                    syncMenuState(level + (isActive ? 1 : 0));
                    updateBreadcrumb();
                    loadContentByPath();

                    const closeChildren = (container) => {
                        Array.from(container.children).forEach(el => {
                            if (el.classList.contains('nav-item')) {
                                const childContainer = el.nextElementSibling;
                                if (childContainer?.classList.contains('nav-child')) {
                                    childContainer.classList.remove('show');
                                    el.querySelector('.nav-arrow').style.transform = 'none';
                                    closeChildren(childContainer); // é€’å½’å…³é—­æ·±å±‚å­èœå•
                                }
                            }
                        });
                    };

                    // å…³é—­åŒçº§èœå•
                    Array.from(parentElement.children)
                        .filter(el => el !== item && el !== childContainer)
                        .forEach(el => {
                            el.classList.remove('active');
                            const siblingChildContainer = el.nextElementSibling;
                            if (siblingChildContainer) {
                                siblingChildContainer.classList.remove('show');
                                closeChildren(siblingChildContainer); // å…³é”®æ–°å¢ï¼šé€’å½’å…³é—­å­èœå•
                            }
                            const arrowElement = el.querySelector('.nav-arrow');
                            if (arrowElement) arrowElement.style.transform = 'none';
                        });
                    if (!isActive) {
                        closeChildren(childContainer);
                    }

                    arrow.style.webkitTransform = isActive ? 'rotate(90deg)' : 'none';
                    arrow.style.transform = isActive ? 'rotate(90deg)' : 'none';
                    childContainer.classList.toggle('show', isActive);
                });

                if (typeof value === 'object') {
                    if (Array.isArray(value)) {
                        value.forEach(event => {
                            Object.entries(event).forEach(([eventType, eventData]) => {
                                if(eventType === 'æ¯”èµ›åç§°') {
                                    Object.entries(eventData).forEach(([matchName, matchDetails]) => {
                                        const matchItem = createMenuItem(matchName, level + 1);
                                        const propContainer = document.createElement('div');
                                        propContainer.className = 'nav-child';

                                        // å¤„ç†æ€§è´¨æ•°æ®
                                        if(matchDetails.æ€§è´¨) {
                                            matchDetails.æ€§è´¨.forEach(propObj => {
                                                Object.entries(propObj).forEach(([propKey]) => {
                                                    const propItem = createMenuItem(propKey, level + 2, true);
                                                    
                                                    // æ€§è´¨é¡¹ç‚¹å‡»å¤„ç†
                                                    propItem.addEventListener('click', (e) => {
                                                        e.stopPropagation();

                                                        currentPath = [
                                                            'å½“å‰é¡µ:é¦–é¡µ',
                                                            currentPath[1],  // ç±»åˆ«
                                                            currentPath[2],  // å¹´ä»½
                                                            currentPath[3],  // æ¯”èµ›åç§°
                                                            propKey          // æ€§è´¨
                                                        ];
                                                        // currentPath = currentPath.slice(0, 3); // ä¿ç•™åˆ°æ¯”èµ›åç§°å±‚çº§
                                                        // currentPath[3] = propKey; // ç›´æ¥æ›¿æ¢æ€§è´¨ä½ç½®
                                                        const category = currentPath[1];
                                                        const year = String(currentPath[2]);      // å¹´ä»½
                                                        const matchName = currentPath[3]; // æ¯”èµ›åç§°
                                                        const property = propKey;         // u15/u18
                                                        console.log(data);
                                                        console.log(currentPath);

                                                        // ä»æ•°æ®ä¸­è·å–æ¯”èµ›è¯¦æƒ…
                                                        // const matches = data[year]
                                                        //     .find(item => item.æ¯”èµ›åç§°[matchName])
                                                        //     ?.æ¯”èµ›åç§°[matchName].æ€§è´¨
                                                        //     .find(p => p[property])?.[property];

                                                        // // æ¸…ç©ºå†…å®¹åŒºåŸŸ
                                                        // const contentDiv = document.querySelector('.content');
                                                        // contentDiv.innerHTML = '';

                                                        // // åˆ›å»ºæ ‡é¢˜
                                                        // const title = document.createElement('h2');
                                                        // title.style.color = '#2F4F4F';
                                                        // title.style.marginBottom = '30px';
                                                        // title.textContent = `${matchName} - ${property.toUpperCase()} æ¯”èµ›è¯¦æƒ…`;
                                                        // contentDiv.appendChild(title);

                                                        // if (matches && matches.length > 0) {
                                                        //     matches.forEach(match => {
                                                        //         // åˆ›å»ºæ¯”èµ›å¡ç‰‡
                                                        //         const card = document.createElement('div');
                                                        //         card.className = 'match-card';

                                                        //         // å¡ç‰‡å¤´éƒ¨ï¼ˆè½®æ¬¡ + ç»“æœï¼‰
                                                        //         const header = document.createElement('div');
                                                        //         header.className = 'match-header';
                                                                
                                                        //         const round = document.createElement('span');
                                                        //         round.className = 'match-round';
                                                        //         round.textContent = match.è½®æ¬¡;
                                                                
                                                        //         const result = document.createElement('span');
                                                        //         result.className = 'match-result';
                                                        //         result.textContent = match.ç»“æœ;
                                                        //         result.style.backgroundColor = match.ç»“æœ === 'èƒœ' ? '#5F9EA0' : '#CD5C5C';

                                                        //         header.appendChild(round);
                                                        //         header.appendChild(result);

                                                        //         // æ¯”èµ›è¯¦æƒ…
                                                        //         const details = document.createElement('div');
                                                        //         details.className = 'match-details';

                                                        //         const createDetailItem = (label, value) => {
                                                        //             const container = document.createElement('div');
                                                        //             container.className = 'detail-item';
                                                                    
                                                        //             const labelSpan = document.createElement('span');
                                                        //             labelSpan.className = 'detail-label';
                                                        //             labelSpan.textContent = label;
                                                                    
                                                        //             const valueSpan = document.createElement('span');
                                                        //             valueSpan.className = 'detail-value';
                                                        //             valueSpan.textContent = value;

                                                        //             container.appendChild(labelSpan);
                                                        //             container.appendChild(valueSpan);
                                                        //             return container;
                                                        //         }

                                                        //         details.appendChild(createDetailItem('å¯¹æ‰‹', match.å¯¹æ‰‹));
                                                        //         details.appendChild(createDetailItem('æ¯”åˆ†', match.æ¯”åˆ†));
                                                        //         details.appendChild(createDetailItem('è½®æ¬¡', match.è½®æ¬¡));
                                                        //         details.appendChild(createDetailItem('ç»“æœ', match.ç»“æœ));

                                                        //         // ç»„åˆå…ƒç´ 
                                                        //         card.appendChild(header);
                                                        //         card.appendChild(details);
                                                        //         contentDiv.appendChild(card);
                                                        //     });
                                                        // } else {
                                                        //     const empty = document.createElement('div');
                                                        //     empty.className = 'no-matches';
                                                        //     empty.textContent = 'æš‚æ— è¯¥çº§åˆ«çš„æ¯”èµ›æ•°æ®';
                                                        //     contentDiv.appendChild(empty);
                                                        // }
                                                        loadMatchDetails(category,year,matchName,property)

                                                        // æ›´æ–°è·¯å¾„
                                                        // currentPath = [
                                                        //     'å½“å‰é¡µ:é¦–é¡µ',
                                                        //     category,
                                                        //     year,
                                                        //     matchName,
                                                        //     property
                                                        // ];


                                                        // updateBreadcrumb();
                                                    });


                                                    
                                                    propContainer.appendChild(propItem);
                                                });
                                            });
                                        }

                                        const matchArrow = matchItem.querySelector('.nav-arrow');
                                        matchItem.addEventListener('click', (e) => {
                                            e.stopPropagation();
                                            const isPropActive = propContainer.classList.toggle('show');
                                            const year = key;  // ä»å¤–å±‚ä½œç”¨åŸŸæ•è·å¹´ä»½
    
                                            if (isPropActive) {
                                    currentPath = currentPath.slice(0, 3);
                                    currentPath[3] = matchName;
                                } else {
                                    currentPath = currentPath.slice(0, 3);
                                }
                                            
                                            // å…³é—­å…¶ä»–åŒçº§æ¯”èµ›èœå•
                                            Array.from(childContainer.children)
                                                .filter(el => el !== matchItem)
                                                .forEach(el => {
                                                    el.nextElementSibling?.classList.remove('show');
                                                    // el.querySelector('.nav-arrow')?.style.transform = 'none';
                                                    const arrowElement = el.querySelector('.nav-arrow');
                                                    if (arrowElement) arrowElement.style.transform = 'none';
                                                });

                                            // æ›´æ–°è·¯å¾„åˆ°æ¯”èµ›å±‚çº§
                                            // currentPath = currentPath.slice(0, 2);
                                            // currentPath[2] = matchName;

                                            syncMenuState(isPropActive ? 3 : 2);
                                            updateBreadcrumb();
                                            loadContentByPath();

                                            matchArrow.style.transform = isPropActive ? 'rotate(90deg)' : 'none';
                                        });

                                        childContainer.appendChild(matchItem);
                                        childContainer.appendChild(propContainer);
                                    });
                                }
                            });
                        });
                    } else {
                        createMenu(childContainer, value, level + 1);
                    }
                }
            });
        }

        function loadCareerAchievements() {
            const contentDiv = document.querySelector('.content');
            const bannerSpan = document.querySelector('.banner span');
            bannerSpan.innerHTML = '<b>å½“å‰é¡µ:</b> <b>ç”Ÿæ¶¯æˆå°±</b>';
            
            // å¥–ç‰Œæ•°æ®æ”¶é›†
            const medalData = {
                'ğŸ† å† å†›': new Map(),
                'ğŸ¥ˆ äºšå†›': new Map(),
                'ğŸ¥‰ å­£å†›': new Map()
            };

            // éå†æ•°æ®ç»“æ„
            Object.entries(data).forEach(([category, years]) => {
                Object.entries(years).forEach(([year, matches]) => {
                    matches.forEach(match => {
                        const matchName = Object.keys(match.æ¯”èµ›åç§°)[0];
                        const matchKey = `${category}|${year}|${matchName}`;
                        
                        match.æ¯”èµ›åç§°[matchName].æ€§è´¨?.forEach(propertyObj => {
                            Object.entries(propertyObj).forEach(([property, records]) => {
                                records.forEach(record => {
                                    const title = record.å¤´è¡”?.trim();
                                    if (!title) return;
                                    
                                    const medalType = title.match(/å† å†›/) ? 'ğŸ† å† å†›' :
                                                    title.match(/äºšå†›/) ? 'ğŸ¥ˆ äºšå†›' :
                                                    title.match(/(å­£å†›|é“œç‰Œ)/) ? 'ğŸ¥‰ å­£å†›' : null;
                                    
                                    if (medalType) {
                                        const uniqueKey = `${matchKey}|${property}`;
                                        if (!medalData[medalType].has(uniqueKey)) {
                                            medalData[medalType].set(uniqueKey, {
                                                category,
                                                year,
                                                matchName,
                                                property,
                                                title,
                                                date: match.æ—¶é—´ || 'æœªçŸ¥æ—¥æœŸ'
                                            });
                                        }
                                    }
                                });
                            });
                        });
                    });
                });
            });

            // åˆ›å»ºUI
            contentDiv.innerHTML = `
                <div class="medal-grid" style="
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
                    gap: 30px;
                    padding: 20px;
                ">
                    ${Object.entries(medalData).map(([type, entries]) => `
                        <div class="medal-card" style="
                            background: linear-gradient(145deg, ${getCardColor(type)});
                            border-radius: 16px;
                            padding: 24px;
                            box-shadow: 0 8px 32px rgba(95,158,160,0.15);
                            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                            min-height: 400px;
                        ">
                            <div class="medal-header" style="
                                display: flex;
                                align-items: center;
                                gap: 15px;
                                margin-bottom: 20px;
                            ">
                                <div class="medal-icon" style="
                                    font-size: 2.2em;
                                    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
                                ">${type.split(' ')[0]}</div>
                                <div>
                                    <h3 style="
                                        color: #2F4F4F;
                                        margin: 0;
                                        font-size: 1.8em;
                                        text-shadow: 0 2px 4px rgba(0,0,0,0.05);
                                    ">${type}</h3>
                                    <p style="
                                        color: #5F9EA0;
                                        margin: 5px 0 0;
                                        font-size: 1.2em;
                                    ">${entries.size} æ¬¡è£èª‰</p>
                                </div>
                            </div>
                            
                            <div class="match-list" style="
                                background: rgba(255,255,255,0.9);
                                border-radius: 12px;
                                padding: 15px;
                                height: 300px;
                                overflow-y: auto;
                            ">
                                ${Array.from(entries.values()).map(entry => `
                                    <div class="match-item" 
                                         style="
                                            padding: 12px;
                                            margin: 8px 0;
                                            border-radius: 8px;
                                            background: white;
                                            box-shadow: 0 2px 8px rgba(95,158,160,0.1);
                                            transition: all 0.3s;
                                            cursor: pointer;
                                         "
                                         onclick="navigateToMatch('${entry.category}', '${entry.year}', '${entry.matchName}', '${entry.property}')">
                                        <div style="
                                            display: flex;
                                            justify-content: space-between;
                                            align-items: center;
                                        ">
                                            <div>
                                                <div style="
                                                    color: #2F4F4F;
                                                    font-weight: 500;
                                                    font-size: 1.1em;
                                                ">${entry.matchName}</div>
                                                <div style="
                                                    color: #888;
                                                    font-size: 0.9em;
                                                    margin-top: 6px;
                                                ">
                                                    <span>${entry.year}</span> â€¢ 
                                                    <span>${entry.category}</span> â€¢ 
                                                    <span>${entry.property.toUpperCase()}</span>
                                                </div>
                                            </div>
                                            <div style="
                                                background: rgba(95,158,160,0.1);
                                                padding: 4px 10px;
                                                border-radius: 20px;
                                                font-size: 0.9em;
                                                color: #5F9EA0;
                                            ">
                                                ${entry.date}
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                    `).join('')}

                </div>
            `;

            // æ·»åŠ æ‚¬åœæ•ˆæœ
            document.querySelectorAll('.medal-card').forEach(card => {
                card.addEventListener('mouseenter', () => {
                    card.style.transform = 'translateY(-5px) scale(1.02)';
                    card.style.boxShadow = '0 12px 40px rgba(95,158,160,0.2)';
                });
                card.addEventListener('mouseleave', () => {
                    card.style.transform = 'none';
                    card.style.boxShadow = '0 8px 32px rgba(95,158,160,0.15)';
                });
            });
        }

        function getCardColor(type) {
            const colors = {
                'ğŸ† å† å†›': ['#fff3e0', '#ffe0b2'],
                'ğŸ¥ˆ äºšå†›': ['#e8f5e9', '#c8e6c9'],
                'ğŸ¥‰ å­£å†›': ['#fbe9e7', '#ffccbc']
            };
            return colors[type].join(', ');
        }

        function navigateToMatch(category, year, matchName, property) {
            currentPath = [
                'å½“å‰é¡µ:é¦–é¡µ',
                category,
                year,
                matchName,
                property
            ];
            syncMenuState(4);
            updateBreadcrumb();
            loadContentByPath();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateBreadcrumb() {
            const bannerSpan = document.querySelector('.banner span');
            if (currentSearchKeyword) {
                bannerSpan.innerHTML = `
                    <b>å½“å‰é¡µ:</b> 
                    <b><a href="javascript:void(0)" onclick="clearSearch()">æœç´¢ï¼š${currentSearchKeyword}</a></b>
                `;
                return;
            }
            // å¤„ç†è·¯å¾„ï¼šä¿ç•™æ‰€æœ‰å…ƒç´ ï¼Œä»…æ›¿æ¢å‰ç¼€
            const validPath = currentPath.map(p => p.replace('å½“å‰é¡µ:', ''));
        
            // ç”Ÿæˆé¢åŒ…å±‘å¯¼èˆª
            const breadcrumbHtml = validPath.map((item, index) => {
                const displayText = item || 'é¦–é¡µ'; // ç©ºå€¼å¤„ç†
                return `<b><a href="javascript:void(0)"
                          onclick="handleBreadcrumbClick(${index})"
                          style="${index === 0 ? 'font-weight:bold' : ''}">
                          ${displayText}
                        </a></b>`;
            }).join('<b> > </b>');
        
            bannerSpan.innerHTML = `<b>å½“å‰é¡µ:</b> ${breadcrumbHtml}`; // å›ºå®šå‰ç¼€
        }
        
        function clearSearch() {
            currentSearchKeyword = null;
            document.querySelector('.search-input').value = '';
            currentPath = ['å½“å‰é¡µ:é¦–é¡µ']; // å¼ºåˆ¶é‡ç½®è·¯å¾„
            syncMenuState(0);
            loadHomeContent();
            updateBreadcrumb();
        }

        function handleBreadcrumbClick(clickIndex) {
            // è®¡ç®—éœ€è¦ä¿ç•™çš„å±‚çº§ï¼ˆ+1å¤„ç†é¦–é¡µåç§»ï¼‰
            const targetLevel = clickIndex;
            currentPath = currentPath.slice(0, targetLevel + 1);

            // åŒæ­¥å·¦ä¾§èœå•çŠ¶æ€
            syncMenuState(targetLevel);
            updateBreadcrumb();
            loadContentByPath();
        }

        function syncMenuState(targetLevel) {
            currentSearchKeyword = null;
            const menuContainer = document.getElementById('navTreeContainer');

            // é€’å½’å…³é—­æ‰€æœ‰è¶…è¿‡å½“å‰å±‚çº§çš„èœå•
            const closeExcessLevels = (container, currentLevel) => {
                Array.from(container.children).forEach(el => {
                    if(el.classList.contains('nav-item')) {
                        const childContainer = el.nextElementSibling;
                        if(childContainer?.classList.contains('nav-child')) {
                            if(currentLevel >= targetLevel) {
                                childContainer.classList.remove('show');
                                el.querySelector('.nav-arrow').style.transform = 'none';
                            }
                            closeExcessLevels(childContainer, currentLevel + 1);
                        }
                    }
                });
            };
            closeExcessLevels(menuContainer, 0);

            // é€’å½’å±•å¼€éœ€è¦æ˜¾ç¤ºçš„å±‚çº§
            const openTargetLevels = (container, currentLevel) => {
        if (!container) return; // æ–°å¢ç©ºå€¼æ£€æŸ¥
        
        Array.from(container.children).forEach(el => {
            if(el.classList.contains('nav-item')) {
                const childContainer = el.nextElementSibling;
                
                // æ–°å¢é˜²å¾¡æ€§ç¼–ç¨‹
                if (!childContainer || !childContainer.classList) {
                    console.warn('æ— æ•ˆçš„å­å®¹å™¨:', el.textContent);
                    return;
                }

                const itemText = el.textContent.replace('â–¶','').trim();
                
                if (currentLevel < targetLevel && 
                   currentPath[currentLevel + 1] === itemText) {
                    childContainer.classList.add('show');
                    const arrow = el.querySelector('.nav-arrow');
                    if (arrow) arrow.style.transform = 'rotate(90deg)';
                    openTargetLevels(childContainer, currentLevel + 1);
                }
            }
        });
    };
            openTargetLevels(menuContainer, 0);
        }


        function loadContentByPath() {
    const contentDiv = document.querySelector('.content');
    const validPath = currentPath.map(p => p.replace('å½“å‰é¡µ:', '')); // ç›´æ¥å¤„ç†å‰ç¼€
    const actualDepth = validPath.length;

    contentDiv.innerHTML = '';
    switch (actualDepth) {
        case 1: loadHomeContent(); break;
        case 2: loadCategoryContent(validPath[1]); break;
        case 3: loadYearContent(validPath[1], validPath[2]); break;
        case 4: loadMatchContent(validPath[1], validPath[2], validPath[3]); break;
        case 5: loadMatchDetails(validPath[1], validPath[2], validPath[3], validPath[4]); break;
        default: loadHomeContent();
    }
}

        function loadHomeContent() {
            const contentDiv = document.querySelector('.content');
            contentDiv.innerHTML = `
                <h1>æ¬¢è¿ä½¿ç”¨å¨œä¸ªç”·äººç³»ç»Ÿv1</h1>
                <p><b>â‘  å¯åœ¨å·¦ä¾§çš„åŠŸèƒ½æ é‡ŒæŸ¥çœ‹èµ›äº‹è®°å½•</b></p>
                <p><b>â‘¡ ä»»ä½•bugå¯åœ¨å¾®åšä¸­è”ç³»æˆ‘æˆ–åœ¨ä¸‹æ–¹ç•™è¨€</b></p>
                <div class="message-board">
                    <textarea id="messageInput" placeholder="ç•™ä¸‹ä½ çš„å»ºè®®æˆ–ç¥ç¦..."></textarea>
                    <button id="submitBtn" onclick="submitMessage()">å‘é€ç•™è¨€ âœˆï¸</button>
                </div>
            `;
            // é‡æ–°ç»‘å®šç•™è¨€æ¿äº‹ä»¶
            contentDiv.addEventListener('click', (e) => {
                if (e.target && e.target.id === 'submitBtn') {
                    submitMessage();
                }
            });
        
            const messageInput = document.getElementById('messageInput');
            if (messageInput) {
                messageInput.onkeydown = function(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        submitMessage();
                    }
                };
            }
            // document.getElementById('submitBtn').onclick = submitMessage;
            // contentDiv.addEventListener('click', (e) => {
            //     if (e.target && e.target.id === 'submitBtn') {
            //         submitMessage();
            //     }
            // });
            // document.getElementById('messageInput').onkeydown = function(e) {
            //     if (e.key === 'Enter' && !e.shiftKey) {
            //         e.preventDefault();
            //         submitMessage();
            //     }
            // };
            currentSearchKeyword = null;
        }

        function loadCategoryContent(category) {
            const years = Object.keys(data[category]);
            const contentDiv = document.querySelector('.content');

            contentDiv.innerHTML = `
                <h2 style="color: #2F4F4F; margin-bottom: 20px;">${category}</h2>
                <div class="year-list" style="padding: 20px;">
                    ${years.map(year => {
                        const matchCount = data[category][year].length; // è·å–è¯¥å¹´ä»½æ¯”èµ›æ•°é‡
                        return `
                            <div class="nav-item level-1"
                                 style="margin: 10px; padding: 15px;
                                        background: rgba(95,158,160,0.1);
                                        border-radius: 8px;
                                        cursor: pointer;"
                                 onclick="handlePathNavigation('${category}', '${year}')">
                                ${year}
                                <span style="font-size:14px;color:#5F9EA0;margin-left:10px;">
                                    å…±åŒ…å« ${matchCount} ä¸ªèµ›äº‹
                                </span>
                            </div>
                        `}).join('')}
                </div>
            `;
        }

        function loadYearContent(category, year) {
            const matches = data[category][year];
            const contentDiv = document.querySelector('.content');

            contentDiv.innerHTML = `
                <h2 style="color: #2F4F4F; margin-bottom: 20px;">${category} - ${year}</h2>
                <div class="match-list" style="padding: 20px;">
                    ${matches.map(match => {
                        const matchName = Object.keys(match.æ¯”èµ›åç§°)[0];
                        const propertyCount = Object.keys(match.æ¯”èµ›åç§°[matchName].æ€§è´¨).length; // è·å–æ€§è´¨æ•°é‡
                        return `
                            <div class="nav-item level-2"
                                 style="margin: 10px; padding: 15px;
                                        background: rgba(95,158,160,0.1);
                                        border-radius: 8px;
                                        cursor: pointer;"
                                 onclick="handlePathNavigation('${category}', '${year}', '${matchName}')">
                                ${matchName}
                                <span style="font-size:14px;color:#5F9EA0;margin-left:10px;">
                                    å…±åŒ…å« ${propertyCount} ä¸ªé¡¹ç›®
                                </span>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
        }

        function loadMatchContent(category, year, matchName) {
            const contentDiv = document.querySelector('.content');
            contentDiv.innerHTML = '';

            // è·å–æ¯”èµ›æ•°æ®
            const matchData = data[category][year].find(
                item => item.æ¯”èµ›åç§°?.[matchName]
            )?.æ¯”èµ›åç§°[matchName].æ€§è´¨;



            // åˆ›å»ºæ ‡é¢˜
            const title = document.createElement('h2');
            title.style.cssText = 'color: #2F4F4F; margin-bottom: 20px;';
            title.innerHTML = `
                 ${matchName}
            `;
            contentDiv.appendChild(title);

            if (!matchData || matchData.length === 0) {
                contentDiv.innerHTML += '<div class="no-matches">æš‚æ— èµ›äº‹æ•°æ®</div>';
                return;
            }

            

            // åˆ›å»ºå®¹å™¨
            const container = document.createElement('div');
            container.className = 'match-list';
            container.style.padding = '20px';

            matchData.forEach(property => {
                Object.entries(property).forEach(([propName, matches]) => {
                    // ç»Ÿè®¡èƒœè´Ÿ
                    const winCount = matches.filter(m => m.ç»“æœ === 'èƒœ').length;
                    const loseCount = matches.length - winCount;

                    // åˆ›å»ºé¡¹ç›®å¡ç‰‡
                    const card = document.createElement('div');
                    card.className = 'nav-item level-2';
                    card.style.cssText = `
                        margin: 10px;
                        padding: 15px;
                        background: rgba(95,158,160,0.1);
                        border-radius: 8px;
                        cursor: pointer;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                    `;
                    card.addEventListener('click', () => {
                        loadMatchDetails(category, year, matchName, propName);
                    });

                    // å·¦ä¾§ä¿¡æ¯
                    const leftSection = document.createElement('div');
                    leftSection.innerHTML = `
                        <span style="font-size:16px;color:#2F4F4F">
                            ${propName.toUpperCase()}
                        </span>
                    `;

                    // å³ä¾§ç»Ÿè®¡
                    const rightSection = document.createElement('div');
                    rightSection.innerHTML = `
                        <span style="font-size:14px;color:#5F9EA0">
                            ${winCount}èƒœ${loseCount}è´Ÿ
                        </span>
                    `;

                    // ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…
                    card.addEventListener('click', () => {
                        currentPath = [
                            'å½“å‰é¡µ:é¦–é¡µ',  // å±‚çº§0
                            category,       // å±‚çº§1
                            year,           // å±‚çº§2
                            matchName,      // å±‚çº§3
                            propName        // å±‚çº§4ï¼ˆæ–°å¢ç¬¬äº”å±‚ï¼‰
                        ];
                        syncMenuState(4);
                        updateBreadcrumb();
                        loadContentByPath();

                    });

                    card.appendChild(leftSection);
                    card.appendChild(rightSection);
                    container.appendChild(card);
                });
            });

            contentDiv.appendChild(container);
        }

        function loadMatchDetails(category, year, matchName, property) {
            const contentDiv = document.querySelector('.content');
            contentDiv.innerHTML = '';

            // ä»æ•°æ®ä¸­è·å–æ¯”èµ›è¯¦æƒ…
            const matches = data[category][year]
                .find(item => item.æ¯”èµ›åç§°[matchName])
                ?.æ¯”èµ›åç§°[matchName].æ€§è´¨
                .find(p => p[property])?.[property];

            // åˆ›å»ºæ ‡é¢˜
            const title = document.createElement('h2');
            title.style.color = '#2F4F4F';
            title.style.marginBottom = '30px';
            title.innerHTML = `
                 ${matchName} - ${property.toUpperCase()}
            `;
            contentDiv.appendChild(title);
            const timeContainer = document.createElement('div');
            timeContainer.className = 'time'
            const infoSet = {
                æ­æ¡£: new Set(),
                å¤´è¡”: new Set(),
                å›¢ä½“: new Set()
            };
            const iconMap = {
                'å¤´è¡”': 'ğŸ–ï¸',  // å¥–ç« å›¾æ ‡
                'æ­æ¡£': 'ğŸ¤'  // æ¡æ‰‹å›¾æ ‡
            };

            const isSpecialLeague = ['Tè”èµ›','æ¬§æ´²ä¹’ä¹“çƒå† å†›è”èµ›','T2äºšå¤ªä¹’ä¹“çƒè”èµ›'].includes(category);

            matches?.forEach(match => {
                if(match.æ­æ¡£) infoSet.æ­æ¡£.add(match.æ­æ¡£);
                if(match.å¤´è¡” && !isSpecialLeague) infoSet.å¤´è¡”.add(match.å¤´è¡”);
                // if(match.å›¢ä½“) infoSet.å›¢ä½“.add(match.å›¢ä½“);
            });
            const infoElements = [];



            // è·å–æ¯”èµ›æ—¶é—´ï¼ˆç¤ºä¾‹æ•°æ®ä¸­æ—¶é—´å­—æ®µåœ¨æ¯”èµ›å¯¹è±¡å¤–å±‚ï¼‰
            const matchData = data[category][year].find(
                item => item.æ¯”èµ›åç§°?.[matchName]
            );
            
            if(matchData?.æ—¶é—´) {
                infoElements.push(`
                    <span class="time-item">
                        <span class="icon">ğŸ“…</span>
                        ${matchData.æ—¶é—´}
                    </span>
                `);
            }

            // æ·»åŠ å…¶ä»–ä¿¡æ¯
            Object.entries(infoSet).forEach(([key, set]) => {
                if(isSpecialLeague && key === 'å¤´è¡”') return;
                if(set.size > 0) {
                    infoElements.push(`
                        <span class="info-item">
                            <span class="label">${iconMap[key]}</span>
                            <span class="value">${Array.from(set).join('ã€')}</span>
                        </span>
                    `);
                }
            });

            timeContainer.innerHTML = infoElements.join('');
            contentDiv.appendChild(timeContainer);


    

            if (matches && matches.length > 0) {
                matches.forEach(match => {
                    // åˆ›å»ºæ¯”èµ›å¡ç‰‡
                    const card = document.createElement('div');
                    card.className = 'match-card';

                    // å¡ç‰‡å¤´éƒ¨ï¼ˆè½®æ¬¡ + ç»“æœï¼‰
                    const header = document.createElement('div');
                    header.className = 'match-header';
                    
                    // if(match.å¤´è¡”) {
                    //     const titleBadge = document.createElement('span');
                    //     titleBadge.className = 'match-result';
                    //     titleBadge.textContent = match.å¤´è¡”;
                    //     titleBadge.style.backgroundColor = '#8FBC8F'; // æµ…ç»¿è‰²
                    //     header.appendChild(titleBadge);
                    // }

                    const round = document.createElement('span');
                    round.className = 'match-round';
                    round.textContent = match.è½®æ¬¡;
                    
                    const result = document.createElement('span');
                    result.className = 'match-result';
                    if (isSpecialLeague) {
                        // æ˜¾ç¤ºå¤´è¡”å’Œæ—¥æœŸ
                        round.textContent = match.å¤´è¡” || 'æ— å¤´è¡”ä¿¡æ¯';
                        result.textContent = match.æ—¥æœŸ || 'æ— æ—¥æœŸä¿¡æ¯';
                        result.style.backgroundColor = match.ç»“æœ === 'èƒœ' ? '#5F9EA0' : '#CD5C5C'; // ç»Ÿä¸€é¢œè‰²
                        result.style.color = 'white';
                    } else {
                        // é»˜è®¤æ˜¾ç¤ºè½®æ¬¡å’Œç»“æœ
                        round.textContent = match.è½®æ¬¡;
                        result.textContent = match.ç»“æœ;
                        result.style.backgroundColor = match.ç»“æœ === 'èƒœ' ? '#5F9EA0' : '#CD5C5C';
                    }
                    // result.textContent = match.ç»“æœ;
                    // result.style.backgroundColor = match.ç»“æœ === 'èƒœ' ? '#5F9EA0' : '#CD5C5C';

                    header.appendChild(round);
                    header.appendChild(result);

                    // æ¯”èµ›è¯¦æƒ…
                    const details = document.createElement('div');
                    details.className = 'match-details';

                    const createDetailItem = (label, value) => {
                        const container = document.createElement('div');
                        container.className = 'detail-item';
                        
                        const labelSpan = document.createElement('span');
                        labelSpan.className = 'detail-label';
                        labelSpan.textContent = label;
                        
                        const valueSpan = document.createElement('span');
                        valueSpan.className = 'detail-value';
                        valueSpan.textContent = value;

                        container.appendChild(labelSpan);
                        container.appendChild(valueSpan);
                        return container;
                    }

                    
                    details.appendChild(createDetailItem('è½®æ¬¡', match.è½®æ¬¡));
                    details.appendChild(createDetailItem('ç»“æœ', match.ç»“æœ));
                    // if(match.æ­æ¡£) {
                    //     details.appendChild(createDetailItem('æ­æ¡£', match.æ­æ¡£));
                    // }
                    // if(match.æ­æ¡£) {
                    //     details.appendChild(createDetailItem('å¤´è¡”', match.å¤´è¡”));
                    // }

                    details.appendChild(createDetailItem('å¯¹æ‰‹', match.å¯¹æ‰‹));
                    details.appendChild(createDetailItem('æ¯”åˆ†', match.æ¯”åˆ†));

                    // ç»„åˆå…ƒç´ 
                    card.appendChild(header);
                    card.appendChild(details);
                    contentDiv.appendChild(card);
                });
            } else {
                const empty = document.createElement('div');
                empty.className = 'no-matches';
                empty.textContent = 'æš‚æ— è¯¥çº§åˆ«çš„æ¯”èµ›æ•°æ®';
                contentDiv.appendChild(empty);
            }

            // åŒæ­¥è·¯å¾„å’Œèœå•çŠ¶æ€
            currentPath = ['å½“å‰é¡µ:é¦–é¡µ', category, year, matchName, property];
            syncMenuState(4);
            updateBreadcrumb();
        }

        function handlePathNavigation(...pathSegments) {
            currentPath = ['å½“å‰é¡µ:', ...pathSegments];
            syncMenuState(pathSegments.length);
            updateBreadcrumb();
            loadContentByPath();
        }



        function createMenuItem(text, level, isFinal = false) {
            const item = document.createElement('div');
            item.className = `nav-item level-${level}${isFinal ? ' final-item' : ''}`;
            item.textContent = text;
            item.style.paddingLeft = `${30 + level * 20}px`;

            if (!isFinal) {
                const arrow = document.createElement('span');
                arrow.className = 'nav-arrow';
                arrow.textContent = 'â–¶';
                item.prepend(arrow);
            }
            return item;
        }

        // åˆå§‹åŒ–èœå•
        async function initMenu() {
            try {
                const response = await fetch('data.json');
                data = await response.json();
                const navContainer = document.getElementById('navTreeContainer');
                createMenu(navContainer, data); // åˆ›å»ºèœå•æ ‘
                currentPath = ['å½“å‰é¡µ:é¦–é¡µ'];
                syncMenuState(0);
                updateBreadcrumb();
                loadHomeContent();
            } catch (error) {
                console.error('æ•°æ®åŠ è½½å¤±è´¥:', error);
                alert('æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥data.jsonæ–‡ä»¶');
            }
            
        }

        function showAlert() {
            alert("è¯¥åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼");
        }

        // document.getElementById('messageInput').addEventListener('keydown', function(e) {
        //     if (e.key === 'Enter' && !e.shiftKey) {
        //         e.preventDefault(); // é˜»æ­¢é»˜è®¤æ¢è¡Œè¡Œä¸º
        //         submitMessage();
        //     }
        // });
        document.addEventListener('DOMContentLoaded', function() {
            // 4. æ·»åŠ ç©ºå€¼æ£€æŸ¥
            const input = document.getElementById('messageInput');
            if (!input) throw new Error("å…ƒç´ æœªæ‰¾åˆ°");

            input.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    submitMessage();
                }
            });
        });


        // æœç´¢åŠŸèƒ½å®ç°
        document.addEventListener('DOMContentLoaded', function() {
            // ç»‘å®šæœç´¢æŒ‰é’®
            const searchBtn = document.querySelector('.search-btn');
            if (searchBtn) {
                searchBtn.addEventListener('click', performSearch);
            } else {
                console.error('æœç´¢æŒ‰é’®å…ƒç´ æœªæ‰¾åˆ°ï¼');
            }

            // ç»‘å®šè¾“å…¥æ¡†å›è½¦äº‹ä»¶
            const searchInput = document.querySelector('.search-input');
            if (searchInput) {
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') performSearch();
                });
            } else {
                console.error('æœç´¢è¾“å…¥æ¡†å…ƒç´ æœªæ‰¾åˆ°ï¼');
            }
        });

        function performSearch() {
            const searchType = document.getElementById('searchType').value;
            const keyword = document.querySelector('.search-input').value.trim();
            currentSearchKeyword = keyword;
            const alertEl = document.querySelector('.search-alert');

            // éšè—ä¹‹å‰çš„æç¤º
            alertEl.classList.remove('show');

            // ç©ºå€¼æ ¡éªŒ
            if (!keyword) {
                alertEl.textContent = "æœç´¢å†…å®¹ä¸èƒ½ä¸ºç©ºï¼Œè¯·è¾“å…¥å…³é”®è¯";
                alertEl.classList.add('show');
                
                // 2ç§’åè‡ªåŠ¨éšè—
                setTimeout(() => {
                    alertEl.classList.remove('show');
                }, 2000);
                
                // è‡ªåŠ¨èšç„¦è¾“å…¥æ¡†
                document.querySelector('.search-input').focus();
                return;
            }
            
            if (searchType === 'event') {
                const results = searchMatches(keyword);
                displaySearchResults(results, 'event');
            } else if (searchType === 'player') {
                const results = searchByPlayer(keyword);
                displaySearchResults(results, 'player');
            } else if (searchType === 'medal') {
                const results = searchByMedal(keyword);
                displaySearchResults(results, 'medal');
            }
            updateBreadcrumb();
        }

        function searchByMedal(keyword) {
            const normalizedKeyword = keyword.replace(/[ç‰Œå†›]/g, '').trim(); // ç»Ÿä¸€å…³é”®è¯æ ¼å¼
            const searchTerms = [];
            
            // å»ºç«‹å¥–ç‰Œæ˜ å°„å…³ç³»
            const medalMap = {
                'å† ': ['å† å†›'],
                'äºš': ['äºšå†›'],
                'é“œ': ['é“œç‰Œ', 'å­£å†›'],
                'å­£': ['é“œç‰Œ', 'å­£å†›'],
                'gold': ['å† å†›'],       // æ”¯æŒè‹±æ–‡
                'silver': ['äºšå†›'],
                'bronze': ['é“œç‰Œ', 'å­£å†›']
            };

            // å¤„ç†æœç´¢è¯
            if (medalMap[normalizedKeyword]) {
                searchTerms.push(...medalMap[normalizedKeyword]);
            } else {
                // å…¼å®¹å…¨ç§°æœç´¢
                const fullNameMap = {
                    'é‡‘': ['å† å†›'],
                    'é“¶': ['äºšå†›'],
                    'å† å†›': ['å† å†›'],
                    'äºšå†›': ['äºšå†›'],
                    'é“œç‰Œ': ['é“œç‰Œ', 'å­£å†›'],
                    'å­£å†›': ['é“œç‰Œ', 'å­£å†›']
                };
                searchTerms.push(...(fullNameMap[keyword] || [keyword]));
            }

            const results = [];
            Object.entries(data).forEach(([category, years]) => {
                Object.entries(years).forEach(([year, matches]) => {
                    matches.forEach(match => {
                        const matchName = Object.keys(match.æ¯”èµ›åç§°)[0];
                        const matchData = match.æ¯”èµ›åç§°[matchName];
                        
                        matchData.æ€§è´¨?.forEach(propertyObj => {
                            Object.entries(propertyObj).forEach(([propName, records]) => {
                                const medalRecords = records.filter(record => {
                                    const title = record.å¤´è¡”?.trim() || '';
                                    return searchTerms.some(term => 
                                        title.includes(term)
                                    );
                                });
                                
                                if (medalRecords.length > 0) {
                                    // ä¿®æ”¹å»é‡é€»è¾‘ï¼šå¢åŠ category/year/propNameä½œä¸ºåˆ¤æ–­æ¡ä»¶
                                    const existing = results.find(r => 
                                        r.matchName === matchName &&
                                        r.property === propName && 
                                        r.category === category &&  // æ–°å¢ç±»åˆ«åˆ¤æ–­
                                        r.year === year              // æ–°å¢å¹´ä»½åˆ¤æ–­
                                    );
                                    
                                    if (!existing) {
                                        results.push({
                                            category,
                                            year,
                                            matchName,
                                            property: propName,
                                            // åˆå¹¶åŒä¸€æ€§è´¨ä¸‹çš„å¤šä¸ªå¥–ç‰Œ
                                            medals: [...new Set(medalRecords.map(r => r.å¤´è¡”))]
                                        });
                                    } else {
                                        // åˆå¹¶åŒä¸€æ€§è´¨ä¸‹çš„ä¸åŒå¥–ç‰Œï¼ˆå¦‚å•åœºèµ›äº‹åŒä¸€æ€§è´¨å¤šä¸ªå¥–ç‰Œï¼‰
                                        existing.medals = [
                                            ...new Set([...existing.medals, 
                                            ...medalRecords.map(r => r.å¤´è¡”)])
                                        ];
                                    }
                                }
                            });
                        });
                    });
                });
            });
            return results;
        }

        
        function searchMatches(keyword) {
            const results = [];
            
            Object.entries(data).forEach(([category, years]) => {
                Object.entries(years).forEach(([year, matches]) => {
                    matches.forEach(match => {
                        const matchName = Object.keys(match.æ¯”èµ›åç§°)[0];
                        if (matchName.includes(keyword)) {
                            results.push({
                                category,
                                year,
                                matchName,
                                data: match.æ¯”èµ›åç§°[matchName]
                            });
                        }
                    });
                });
            });
            
            return results;
        }

        function searchByPlayer(keyword) {
            const results = [];
            
            Object.entries(data).forEach(([category, years]) => {
                Object.entries(years).forEach(([year, matches]) => {
                    matches.forEach(match => {
                        const matchName = Object.keys(match.æ¯”èµ›åç§°)[0];
                        const matchData = match.æ¯”èµ›åç§°[matchName];
                        
                        matchData.æ€§è´¨.forEach(propertyObj => {
                            Object.entries(propertyObj).forEach(([propName, records]) => {
                                records.forEach(record => {
                                    if (record.å¯¹æ‰‹) {
                                        if (record.å¯¹æ‰‹.toLowerCase().includes(keyword.toLowerCase())) {
                                        // æ¯ä¸ªåŒ¹é…è®°å½•ç”Ÿæˆç‹¬ç«‹æ¡ç›®
                                            results.push({
                                                category,
                                                year,
                                                matchName,
                                                property: propName,
                                                opponent: record.å¯¹æ‰‹,
                                                score: record.æ¯”åˆ†,
                                                result: record.ç»“æœ
                                            });
                                        }
                                    }
                                    
                                });
                            });
                        });
                    });
                });
            });
            
            return results;
        }


        function displaySearchResults(results, searchType) {
            const contentDiv = document.querySelector('.content');
            contentDiv.innerHTML = `<h2 style="color: #2F4F4F; margin-bottom: 20px;">æœç´¢ç»“æœï¼ˆ${results.length}æ¡ï¼‰</h2>`;
            
            if (results.length === 0) {
                contentDiv.innerHTML += '<div class="no-matches">æœªæ‰¾åˆ°åŒ¹é…çš„èµ›äº‹</div>';
                return;
            }

            const container = document.createElement('div');
            container.className = 'match-list';
            container.style.padding = '20px';
            

            if (searchType === 'event') {
                results.forEach(result => {
                const card = document.createElement('div');
                card.className = 'nav-item level-2';
                card.style.cssText = `
                    margin: 10px; 
                    padding: 15px;
                    background: rgba(95,158,160,0.1);
                    border-radius: 8px;
                    cursor: pointer;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                `;

                const properties = result.data.æ€§è´¨ || [];
                const propertyCount = properties.length;

                card.innerHTML = `
                    <div>
                        <span style="color:#2F4F4F">${result.matchName}</span>
                        <div style="font-size:12px;color:#666;margin-top:5px">
                            ${result.year} | ${result.category}
                        </div>
                    </div>
                    <span style="font-size:14px;color:#5F9EA0">
                        åŒ…å« ${propertyCount} ä¸ªé¡¹ç›®
                    </span>
                `;

                card.addEventListener('click', () => {
                    currentPath = [
                        'å½“å‰é¡µ:é¦–é¡µ',
                        result.category,
                        result.year,
                        result.matchName
                    ];
                    syncMenuState(3);
                    updateBreadcrumb();
                    loadMatchContent(result.category, result.year, result.matchName);
                });

                container.appendChild(card);
            });} else if (searchType === 'player') {
                // æ–°å¢é€‰æ‰‹å±•ç¤ºé€»è¾‘
                results.forEach(result => {
                    const card = document.createElement('div');
                    card.className = 'match-card';
                    card.style.cursor = 'pointer';

                    card.innerHTML = `
                        <div class="match-header">
                            <span class="match-round">${result.matchName}</span>
                            <span class="match-result" style="background:#5F9EA0">
                                ${result.year} | ${result.category} 
                            </span>
                        </div>
                        <div style="margin-top:15px">
                            <div style="display:flex;justify-content:space-between;padding:8px 0">
                                <span>${result.property.toUpperCase()}-${result.opponent}</span>
                                <span style="color:${result.result === 'èƒœ' ? '#5F9EA0' : '#CD5C5C'}">
                                    ${result.score}ï¼ˆ${result.result}ï¼‰
                                </span>
                            </div>
                        </div>
                    `;

                    // ç‚¹å‡»è·³è½¬åˆ°è¯¦ç»†èµ›äº‹
                    card.addEventListener('click', () => {
                        currentPath = [
                            'å½“å‰é¡µ:é¦–é¡µ',
                            result.category,
                            result.year,
                            result.matchName,
                            result.property
                        ];
                        syncMenuState(4);
                        updateBreadcrumb();
                        loadContentByPath();
                    });

                    container.appendChild(card);
                });
            } else if (searchType === 'medal') {
                const container = document.createElement('div');
                container.className = 'match-list';
                
                results.forEach(result => {
                    const card = document.createElement('div');
                    card.className = 'nav-item level-2';
                    card.style.cssText = `margin:10px;padding:15px;background:rgba(95,158,160,0.1);border-radius:8px;`;

                    card.innerHTML = `
                        <div style="width:100%">
                            <div style="display:flex;justify-content:space-between">
                                <span style="color:#2F4F4F">${result.matchName}-${result.property}</span>
                                <span style="font-size:12px;color:#666">
                                    ${result.year}ï½œ${result.category}
                                </span>
                            </div>
                            <div style="margin-top:10px;color:#5F9EA0">
                                ğŸ… ${result.medals.join('ã€')}
                            </div>
                        </div>
                    `;

                    card.addEventListener('click', () => {
                        currentPath = [
                            'å½“å‰é¡µ:é¦–é¡µ',
                            result.category,
                            result.year,
                            result.matchName,
                            result.property
                        ];
                        syncMenuState(4);
                        updateBreadcrumb();
                        loadContentByPath();
                    });

                    container.appendChild(card);
                });
                contentDiv.appendChild(container);
                return;
            }

            contentDiv.appendChild(container);
        }

        function groupByMatch(results) {
            const groups = [];
            
            results.forEach(result => {
                // æŸ¥æ‰¾æ˜¯å¦å·²æœ‰è¯¥æ¯”èµ›çš„ç»„
                let group = groups.find(g => 
                    g.matchName === result.matchName &&
                    g.category === result.category &&
                    g.year === result.year
                );
                
                if (!group) {
                    group = {
                        matchName: result.matchName,
                        category: result.category,
                        year: result.year,
                        properties: {}
                    };
                    groups.push(group);
                }
                
                // æŒ‰é¡¹ç›®åˆ†ç»„
                if (!group.properties[result.property]) {
                    group.properties[result.property] = [];
                }
                
                group.properties[result.property].push({
                    opponent: result.opponent,
                    score: result.score,
                    result: result.result
                });
            });
            
            return groups;
        }


        function submitMessage() {
            const input = document.getElementById('messageInput');
            if (!input.value.trim()) return;

            // åˆ›å»ºç•™è¨€å…ƒç´ 
            const message = document.createElement('div');
            message.className = 'message-bubble';
            message.textContent = input.value;

            // éšæœºæ ·å¼
            message.style.left = Math.random() * 80 + '%';
            message.style.top = Math.random() * 80 + '%';
            message.style.fontSize = (Math.random() * 20 + 10) + 'px';
            message.style.color = `hsl(${Math.random() * 360}, 70%, 40%)`;
            message.style.transform = `rotate(${Math.random() * 10 - 5}deg)`;

            // ç«‹ä½“æ•ˆæœ
            message.style.textShadow = `1px 1px 2px rgba(0,0,0,0.2),
                                      -1px -1px 2px rgba(255,255,255,0.5)`;

            // æ·»åŠ åˆ é™¤åŠŸèƒ½
            message.onclick = () => message.remove();

            document.querySelector('.content').appendChild(message);
            input.value = '';
        }

        // window.addEventListener('DOMContentLoaded', initMenu);
        window.addEventListener('DOMContentLoaded', () => {
        // å…ˆåˆå§‹åŒ–æ•°æ®å†ç»‘å®šå…¶ä»–äº‹ä»¶
                initMenu().then(() => {
                    // ç»‘å®šæœç´¢ç›¸å…³äº‹ä»¶
                    const searchBtn = document.querySelector('.search-btn');
                    searchBtn.addEventListener('click', performSearch);
                    
                    const searchInput = document.querySelector('.search-input');
                    searchInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') performSearch();
                    });
        
                    // ç»‘å®šç•™è¨€æ¿äº‹ä»¶
                    document.getElementById('submitBtn').onclick = submitMessage;
                    document.getElementById('messageInput').onkeydown = function(e) {
                        if (e.key === 'Enter' && !e.shiftKey) {
                            e.preventDefault();
                            submitMessage();
                        }
                    };
                });
            });



    </script>

</head>
    
<body>
    <header class="header">

        <h3 class="title">ğŸ“å¼ æœ¬æ™ºå’Œæ¯”èµ›è®°å½•æ±‡æ€»ğŸ“</h3>


        <div class="search-container">

            <select id="searchType" class="search-filter">
                <option value="event">æŒ‰èµ›äº‹</option>
                <option value="player">æŒ‰é€‰æ‰‹</option>
                <option value="medal">æŒ‰å¥–ç‰Œ</option>
                <option value="year">æŒ‰å¹´ä»½</option>
            </select>
            <input type="text" class="search-input" placeholder="è¯·è¾“å…¥æœç´¢å†…å®¹...">
            <button class="search-btn">
                <div class="pingpong-icon">ğŸ“</div>
            </button>
            <div class="search-alert"></div>
        </div>
    </header>
    <div class="content-area">
        <!-- è¿™é‡Œå¯ä»¥æ·»åŠ å…·ä½“å†…å®¹ -->
        <div class="banner">
            <span><b>å½“å‰é¡µ:</b></span>
            <div class="nav-buttons">
                <button class="nav-button" onclick="history.back()">â—€</button>
                <button class="nav-button" onclick="history.forward()">â–¶</button>
            </div>
        </div>
        <div class="content">
            <!-- <h1>æ¬¢è¿ä½¿ç”¨å¨œä¸ªç”·äººç³»ç»Ÿv1</h1>
            <p><b>â‘  å¯åœ¨å·¦ä¾§çš„åŠŸèƒ½æ é‡ŒæŸ¥çœ‹èµ›äº‹è®°å½•</b></p>
            <p><b>â‘¡ ä»»ä½•bugå¯åœ¨å¾®åšä¸­è”ç³»æˆ‘æˆ–åœ¨ä¸‹æ–¹ç•™è¨€</b></p>
            <div class="message-board">
                <textarea id="messageInput" placeholder="ç•™ä¸‹ä½ çš„å»ºè®®æˆ–ç¥ç¦..."></textarea>
                <button id="submitBtn" onclick="submitMessage()">å‘é€ç•™è¨€ âœˆï¸</button>
            </div> -->
        </div>
    </div>
    <!-- å¯¼èˆªæ å®¹å™¨ -->
    <nav class="sidebar">
        <!-- ä¸Šéƒ¨åŒºå— -->
        <div class="menu-item top-item">
            <div onclick="loadCareerAchievements()">ç”Ÿæ¶¯æˆå°±</div>
            <div onclick="showAlert()">æŠ€æœ¯åˆ†æ</div>
            <div onclick="showAlert()">å…³äºé€‰æ‰‹</div>
            <div onclick="showAlert()">è¯­è¨€è®¾ç½®</div>
        </div>

        <!-- ä¸‹éƒ¨åŒºå— -->
        <div class="menu-item bottom-item" id="navTreeContainer">
            <!-- <div>è®¾ç½®é¡¹1</div>
            <div>è®¾ç½®é¡¹2</div> -->
        </div>
    </nav>
</body>
</html>
